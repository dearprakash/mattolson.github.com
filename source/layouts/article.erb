<% content_for :onready do %>
  function j() {
    var r = $(this).parent().find(".share_links_wrapper");
    var q = $(this).parent().find(".read-later_wrapper");
    var t = $(this).parent().find(".permalink_wrapper");
    if ($(this).find(".read-later_wrapper").length > 0) {
      r.hide();
      t.hide();
      q.show();
    }
    
    if ($(this).find(".permalink_wrapper").length > 0) {
      r.hide();
      q.hide();
      t.show();
      t.find("input").focus();
    }
      
    if ($(this).find(".share_links_wrapper").length > 0) {
      q.hide();
      t.hide();
      r.show();
    }
  }

  function h() {
    $(this).find(".share_links_wrapper").hide();
    $(this).find(".read-later_wrapper").hide();
    $(this).find(".permalink_wrapper").hide();
  }
  
  $("li.share, li.permalink, li.read-later").hoverIntent({
    sensitivity: 1,
    interval: 0,
    over: j,
    timeout: 100,
    out: h
  });
<% end %>

<% wrap_layout :layout do %>
  <%= partial '/blog/article', :locals => {:article => current_article, :digest => false} %>
<% end %>
